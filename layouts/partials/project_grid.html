{{- $ctx := . -}}
{{- $title := "Projects" -}}
{{- $limit := 999 -}}

{{- if reflect.IsMap . -}}
  {{- $ctx = .ctx -}}
  {{- $title = .title | default "Projects" -}}
  {{- $limit = .limit | default 999 -}}
{{- end -}}


<!-- Debug: Check if data exists -->
{{ if $ctx.Site.Data.projects }}
  <p>✓ Projects data found! Count: {{ len $ctx.Site.Data.projects }}</p>
{{ else }}
  <p style="color: red;">✗ No projects data found</p>
{{ end }}

<h2>{{ $title }}</h2>

<div class="project-grid">
  {{ range first $limit $ctx.Site.Data.projects }}
    <a class="project-card" href="{{ .url }}" target="_blank" rel="noopener">
      {{ if .image }}
        <img class="project-thumb" src="{{ .image | relURL }}" alt="{{ .title }}">
      {{ end }}
      <div class="project-meta">
        <div class="project-title">{{ .title }}</div>
        {{ if .subtitle }}
          <div class="project-subtitle">{{ .subtitle }}</div>
        {{ end }}
      </div>
    </a>
  {{ end }}
</div>